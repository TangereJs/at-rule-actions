<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>at-rule-actions Demo</title>

  <script src="../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../layout/layout.html" />
  <link rel="import" href="at-rule-actions.html" />

  <style media="screen">
    .textarea    {
      width: 100%;
    }
    .padding {
      padding: 0 6px;
    }
  </style>
</head>

<body>
  <div class="vertical layout">
    <div class="vertical layout">
      <h2>Actions Demo - json schema</h2>
      <at-rule-actions id="afActions"></at-rule-actions>
    </div>

    <div class="horizontal layout">
      <div class="vertical layout flex-6 padding">
          <h3>at-rule-actions value</h3>
          <textarea class="textarea" id="actionsValueEcho" rows="30" cols="50"></textarea>
      </div>
      <div class="vertical layout flex-6 padding">
          <h3>at-rule-actions schema</h3>
          <textarea class="textarea" id="actionsSchema" rows="30" cols="50"></textarea>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('WebComponentsReady', function() {

      var jsonSchema = {
        "properties": {
          "checkboxDemo": {
            "type": "boolean",
            "title": "Checkbox demo"
          },
          "toggleDemo": {
            "type": "boolean",
            "xtype": "toggle",
            "title": "Toggle demo"
          },
          "codeDemo": {
            "type": "string",
            "xtype": "code",
            "title": "Code demo"
          },
          "dateDemo": {
            "type": "string",
            "xtype": "date",
            "title": "Date demo"
          },
          "timeDemo": {
            "type": "string",
            "xtype": "time",
            "title": "Time demo"
          },
          "dateAndTimeDemo": {
            "type": "string",
            "xtype": "datetime",
            "title": "Date and time demo"
          },
          "daterangeDemo": {
            "type": "daterange",
            "title": "Daterange demo"
          },
          "fileDemo": {
            "type": "string",
            "xtype": "file",
            "title": "File demo"
          },
          "imageDemo": {
            "type": "string",
            "xtype": "image",
            "title": "Image demo"
          },
          "enumDemo": {
            "type": "string",
            "xtype": "enum",
            "title": "Enum demo",
            "xvaluelist": [{
              title: "Value 1",
              value:"value1"
            }, {
              title: "Value 2",
              value:"value2"
            }, {
              title: "Value 3",
              value:"value3"
            }]
          },
          "lookupDemo": {
            "type": "string",
            "xtype": "lookup",
            "title": "Lookup demo"
          },
          "markdownDemo": {
            "type": "string",
            "xtype": "marked",
            "title": "Markdown demo"
          },
          "numberDemo": {
            "type": "number",
            "title": "Number demo"
          },
          "passwordDemo": {
            "type": "string",
            "xtype": "password",
            "title": "Password demo"
          },
          "radioDemo": {
            "type": "string",
            "xtype": "radio",
            "title": "Radio demo",
            "xvaluelist": [{
              title: "Value 1",
              value:"value1"
            }, {
              title: "Value 2",
              value:"value2"
            }, {
              title: "Value 3",
              value:"value3"
            }]
          },
          "sectionDemo": {
            "type": "section",
            "title": "Section demo"
          },
          "textDemo": {
            "type": "string",
            "title": "Text demo"
          },
          "textareaDemo": {
            "type": "string",
            "xtype": "textarea",
            "title": "Textarea demo"
          }
        }
      };

      var jsonValue = [{
          actionName: 'updateField',
          fieldName: "checkboxDemo",
          updateTo: true
        }, {
          actionName: 'updateField',
          fieldName: "toggleDemo",
          updateTo: true
        }, {
          actionName: 'updateField',
          fieldName: "codeDemo",
          updateTo: "lorem ipsum"
        }, {
          actionName: 'updateField',
          fieldName: "dateDemo",
          updateTo: ""
        }, {
          actionName: 'updateField',
          fieldName: "timeDemo",
          updateTo: ""
        }, {
          actionName: 'updateField',
          fieldName: "dateAndTimeDemo",
          updateTo: ""
        }, {
          actionName: 'updateField',
          fieldName: "daterangeDemo",
          updateTo: ""
        }, {
          actionName: 'updateField',
          fieldName: "fileDemo",
          updateTo: ""
        }, {
          actionName: 'updateField',
          fieldName: "imageDemo",
          updateTo: ""
        }, {
          actionName: 'updateField',
          fieldName: "enumDemo",
          updateTo: "value2"
        }, {
          actionName: 'updateField',
          fieldName: "lookupDemo",
          updateTo: ""
        }, {
          actionName: 'updateField',
          fieldName: "markdownDemo",
          updateTo: "lorem ipsum"
        }, {
          actionName: 'updateField',
          fieldName: "numberDemo",
          updateTo: "42"
        }, {
          actionName: 'updateField',
          fieldName: "passwordDemo",
          updateTo: "password"
        }, {
          actionName: 'updateField',
          fieldName: "radioDemo",
          updateTo: "value3"
        }, {
          actionName: 'updateField',
          fieldName: "sectionDemo",
          updateTo: "lorem ipsum"
        }, {
          actionName: 'updateField',
          fieldName: "textDemo",
          updateTo: "lorem ipsum"
        }, {
          actionName: 'updateField',
          fieldName: "textareaDemo",
          updateTo: "lorem ipsum"
        }];

      var actionsValueEcho = document.getElementById('actionsValueEcho');
      var afActions = document.getElementById('afActions');
      afActions.schema = jsonSchema;
      afActions.value = jsonValue;

      afActions.addEventListener('value-changed', function(event) {
        var jsonValue = JSON.stringify(event.detail.value, undefined, ' ');
        actionsValueEcho.value = jsonValue;
      });

      var valueJsonStr = JSON.stringify(jsonValue, undefined, ' ');
      actionsValueEcho.value = valueJsonStr;
      actionsValueEcho.addEventListener('change', function(event) {
        var
          jsonValue = event.currentTarget.value,
          value = JSON.parse(jsonValue);

        afActions.value = value;
      });

      var actionsSchema = document.getElementById('actionsSchema');
      actionsSchema.value = JSON.stringify(jsonSchema, undefined, ' ');
      actionsSchema.addEventListener('change', function(event) {
        var
          jsonSchema = event.currentTarget.value,
          schema = JSON.parse(jsonSchema);
        afActions.schema = schema;
      });
    });
  </script>
</body>

</html>
